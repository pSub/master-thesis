% Things to be done before giving away for print
% - spell check
% - let others proof-read

\documentclass[a4paper,twoside,openright,draft]{book}

%% packages
%%%%%%%%%%%
\usepackage[utf8x]{inputenc}
\usepackage[USenglish]{babel}
\usepackage{amsbsy,amscd,amsfonts,amssymb,amstext,amsmath,amsthm,latexsym}
% Package mathpartir is currently not available in nixpkgs
\usepackage{mathpartir}
\usepackage{stmaryrd}
\usepackage{dot2texi}
\usepackage{tikz}
\usetikzlibrary{shapes,arrows}
\usepackage{url}
\usepackage[xindy]{glossaries}
\usepackage[nottoc]{tocbibind}
\usepackage{pdfpages}
\usepackage{syntax}
\usepackage{fancyhdr}
\usepackage{hyperref}
\usepackage[final]{listings}

\usepackage{todonotes}

%% options
%%%%%%%%%%
\newtheorem{definition}{Definition}
\newtheorem{example}{Example}
% \newtheorem{lemma}{Lemma}
% \newtheorem{theorem}{Theorem}
% \newtheorem{claim}{Claim}
\numberwithin{definition}{chapter}
\bibliographystyle{alphaurl}
\makeglossaries

% Listings
%%%%%%%%%%
\lstset{ %
  backgroundcolor=\color{white},   % choose the background color
  captionpos=b,                    % sets the caption-position to bottom
  commentstyle=\color{mygreen},    % comment style
  escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
  keywordstyle=\color{blue},       % keyword style
  stringstyle=\color{mymauve},     % string literal style
  showstringspaces=false,
  basicstyle=\ttfamily,
  columns=fullflexible,
  keepspaces=true,
}

\lstdefinelanguage{sltc}
{
morekeywords={module,contexts,meta-variables,judgments,rules,conjectures,language},
alsoletter=-,
sensitive=false,
morecomment=[l]{//},
morecomment=[s]{/*}{*/},
morestring=[b]",
}

%% Definition of the abstract environment
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\pagestyle{empty}
\newenvironment{abstract}
{\cleardoublepage\null\vfill\begin{center}
\bfseries\abstractname\end{center}}
{\vfill\null}

%% Definition of the line number references. Thanks to Eelco Dolstra!
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcounter{CalloutCtr}
\newcommand{\callout}[1]{\refstepcounter{CalloutCtr}%
{\setlength\fboxsep{1pt}\fbox{\footnotesize\bf\theCalloutCtr}}%
\label{#1}}
\newcommand{\refcallout}[1]{%
{\setlength\fboxsep{1pt}\fbox{\footnotesize\bf\ref{#1}}}}

%% Allow latex commands within verbatim with !cmd`param'
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\let\oldv\@verbatim
\def\@verbatim{\oldv\catcode`\!=0 \catcode`\`=1 \catcode`\'=2 }
\makeatother

\input{include/macros}
\input{include/glossary}

\begin{document}

% Title page
%%%%%%%%%%%%
\input{include/titlepage}

% Erkl√§rung
%%%%%%%%%%%
\input{include/erklaerung}

% Abstract
%%%%%%%%%%
\begin{abstract}
\input{include/abstract}
\end{abstract}

% Table of contents
%%%%%%%%%%%%%%%%%%%
\tableofcontents
%\listoffigures
%\listoftables

% Content
%%%%%%%%%
\mainmatter
\input{include/introduction}
\input{include/preliminaries}
\input{include/specification-language}
\input{include/formula-generation}
\input{include/type-checker-generation}
\input{include/applications}
\input{include/summary}

% Bibliography
%%%%%%%%%%%%%%
\bibliography{bibliography}

\end{document}
